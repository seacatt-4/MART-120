<html>
    <head>
        <title>
            Homework 13
        </title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.min.js"></script>
  <script>
var playerX = 180;
var playerY = 50;

var obX = [];
var speedX = [];
var obY = [];
var speedY = [];
var obD = [];

var w = 87; 
var s = 83;
var a = 65;
var d = 68;

var textX;
var textY;
var start = false;

function setup() {
  createCanvas(400, 400);
  setObstacles();
}

function draw() {
  background(50, 800, 200);
  theGame();
}

//the whole game
function theGame(){
  if (!start) {
    drawIntro();
  } else {
    drawGame();
    borderWall();
    theExit();
    youWin();
}
}

//intro scene
function drawIntro() {
  noStroke();
  textStyle(BOLD);

  fill(50, 200, 50);
  rect(50, 124, 300, 60);

  textSize(25);
  fill(80, 80, 80);
  text("Click anywhere to start!", 60, 160);

  textSize(30);
  text("get to the exit", textX, textY);
}

//started game and create text
function mouseClicked() {
  textX = mouseX;
  textY = mouseY;
  start = true;
}

//game scene
function drawGame() {
  textSize(30);
  fill(80, 80, 80);
  text("get to the exit", textX, textY);

  movePlayer();
  fill("pink");

 //draw obstacles
    for (var i = 0; i < obX.length; i++) {
    obX[i] += speedX[i];
    obY[i] += speedY[i];

    if (obX[i] < 0) obX[i] = width;
    if (obX[i] > width) obX[i] = 0;
    if (obY[i] < 0) obY[i] = height;
    if (obY[i] > height) obY[i] = 0;

    circle(obX[i], obY[i], obD[i]);
  }
    
  // draw player
  fill("pink");
  circle(playerX, playerY, 20);
}

//obstacle randomize
function setObstacles() {
  obX = [];
  speedX = [];
  obY = [];
  speedY = [];
  obD = [];
  
  let count = 5;

  for (let i = 0; i < count; i++) {
    obX.push(random(20, 380));     
    obY.push(random(20, 380));
    obD.push(random(10, 30));
    
    speedX.push(random(-3, 3));
    speedY.push(random(-3, 3));
  }
}

//player movement
function movePlayer() {
  if (keyIsDown(w)) playerY -= 2;
  if (keyIsDown(s)) playerY += 2;
  if (keyIsDown(a)) playerX -= 2;
  if (keyIsDown(d)) playerX += 2;
}

//border
  function borderWall() {
    noStroke();
    fill(20, 40, 80);
    rect(0, 0, 10, 400);
    rect(0, 0, 400, 10);
    rect(10, 390, 400, 10);
    rect(390, 10, 10, 400);
  }
    
    //exit
    function theExit(){
      fill(80, 80, 80);
      textSize(15);
      text('the exit', 173, 385);
      
      fill('pink');
      rect(170, 390, 60, 10);
  
}

//youWin
  function youWin(){
    if (playerX >= 170 && playerX <= 230) {
      exitX = true
    } else {
      exitX = false
    }
    if (playerY >= 400) {
      exitY = true
    } else {
      exitY = false
    }
    if (exitX == true && exitY == true) {
      textSize(70);
      fill('pink');
      text('YOU WIN!', 40, 200)
    }    
    
  }
</script>
</head>
</html>